<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ§® HyperCalc v5 â€“ Reality & Physics Engine</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">

<style>
/* ======================= */
/* Reset & Base */
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
body { display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(135deg,#0f172a,#1e293b); color: #e5e7eb; }

/* ======================= */
/* App Container */
.app { 
  width: 100%; max-width: 480px; background:#020617; border-radius: 25px; padding: 25px; box-shadow: 0 25px 60px rgba(0,0,0,.7); transition: all 0.3s ease; 
}

/* ======================= */
/* Header */
header { text-align: center; margin-bottom: 20px; }
header h1 { font-size: 1.7rem; color: #fff; text-shadow: 0 0 8px #2563eb; }
header p { opacity: 0.7; font-size: 0.9rem; font-style: italic; }

/* ======================= */
/* Display */
.display {
  background:#020617; border: 2px solid #334155; border-radius: 15px;
  padding: 18px; font-size: 1.8rem; min-height: 60px; text-align: left; margin-bottom: 20px;
  box-shadow: inset 0 2px 5px rgba(255,255,255,0.05);
  overflow-wrap: break-word;
}

/* ======================= */
/* Keys Grid */
.keys {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

button {
  padding: 16px; font-size: 1.1rem; border: none; border-radius: 12px;
  background: #1e293b; color:#e5e7eb; cursor: pointer;
  transition: all 0.15s ease;
}
button:hover { background:#334155; transform: scale(1.05); }
button:active { transform: scale(0.96); }

.op { background:#334155; }
.equal { grid-column: span 2; background: #2563eb; color:#fff; }
.clear { background:#7f1d1d; color:#fff; }
.extra { background:#047857; color:#fff; }

/* ======================= */
/* Canvas */
canvas {
  margin-top: 20px; border-radius: 15px; border: 2px solid #334155; width:100%; height:auto;
  background: #0f172a;
  box-shadow: inset 0 2px 10px rgba(255,255,255,0.05);
  cursor: crosshair;
  touch-action: none;
}

/* ======================= */
/* Tooltip / Hint */
.tooltip {
  font-size: 0.75rem; color: #9ca3af; text-align: center; margin-top: 5px;
}
</style>
</head>

<body>
<div class="app">
<header>
  <h1>ğŸ§® HyperCalc</h1>
  <p>Ù†Ø³Ø®Ù‡Ù” v5 â€“ Reality & Physics Engine + AI Insights</p>
</header>

<div id="display" class="display">0</div>

<div class="keys">
  <button class="clear">C</button>
  <button class="op">Ã·</button>
  <button class="op">Ã—</button>
  <button class="op">âˆ’</button>

  <button>7</button><button>8</button><button>9</button>
  <button class="op">+</button>

  <button>4</button><button>5</button><button>6</button>
  <button>.</button>

  <button>1</button><button>2</button><button>3</button>
  <button class="equal">=</button>

  <button>0</button>
  <button class="extra" id="imgBtn">ğŸ“· Reality</button>
  <button class="extra" id="csvBtn">CSV</button>
  <button class="extra" id="pdfBtn">PDF</button>
</div>

<input type="file" id="fileInput" accept="image/*" hidden />
<canvas id="canvas" width="420" height="260"></canvas>
<div class="tooltip">ğŸ“Œ ØªÙ…Ø§Ù…ÛŒ Ù…Ø­Ø§Ø³Ø¨Ø§ØªØŒ ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ Ùˆ Ù…Ø±Ø§Ø­Ù„ Ø­Ù„ Ø¨Ù‡ Ø´Ù…Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
</div>

<script type="module" src="./ui.js"></script>

<script>
/* ====================== */
/* Service Worker */
if ('serviceWorker' in navigator) {
  window.addEventListener('load', ()=>{ navigator.serviceWorker.register('sw.js'); });
}

/* ====================== */
/* Reality Image + CSV + PDF Buttons */
document.getElementById('imgBtn').onclick = ()=> document.getElementById('fileInput').click();
document.getElementById('fileInput').addEventListener('change', e=>{
  const file = e.target.files[0];
  if(!file) return;
  // Example: Reality Engine Hook
  console.log('Image loaded for Reality Analysis:', file.name);
});

document.getElementById('csvBtn').onclick = ()=>{
  alert('Export CSV feature â€“ Ø¢Ù…Ø§Ø¯Ù‡');
};
document.getElementById('pdfBtn').onclick = ()=>{
  alert('Export PDF feature â€“ Ø¢Ù…Ø§Ø¯Ù‡');
};

/* ====================== */
/* Canvas Drawing */
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let drawing = false;
canvas.addEventListener('mousedown',()=>drawing=true);
canvas.addEventListener('mouseup',()=>drawing=false);
canvas.addEventListener('mousemove',e=>{
  if(!drawing) return;
  ctx.fillStyle = '#2563eb';
  ctx.fillRect(e.offsetX,e.offsetY,2,2);
});

/* ====================== */
/* Keyboard Input */
document.addEventListener('keydown', e=>{
  const display = document.getElementById('display');
  if(!isNaN(e.key)) display.textContent += e.key;
  else if(e.key==='Enter') display.textContent = 'Ù†ØªÛŒØ¬Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯!';
  else if(e.key==='Backspace') display.textContent = display.textContent.slice(0,-1);
});
</script>
</body>
</html>
